#!/usr/bin/env bash
set -euo pipefail

# Manual installs that are not handled by apt/brew/mise.
# Add commands below; keep them idempotent where possible.

# Example (npm):
if command -v mise >/dev/null 2>&1; then
  mise exec -- npm install -g @openai/codex @google/gemini-cli
elif command -v npm >/dev/null 2>&1; then
  npm install -g @openai/codex @google/gemini-cli
fi

# Example (go):
if command -v mise >/dev/null 2>&1; then
  GOBIN="$HOME/.local/bin" mise exec -- go install github.com/steveyegge/gastown/cmd/gt@latest
elif command -v go >/dev/null 2>&1; then
  GOBIN="$HOME/.local/bin" go install github.com/steveyegge/gastown/cmd/gt@latest
fi

# Example (curl | sh):
curl -fsSL https://claude.ai/install.sh | bash

# OpenCode (AI coding assistant)
if command -v mise >/dev/null 2>&1; then
  mise exec -- bun install -g opencode-ai
elif command -v bun >/dev/null 2>&1; then
  bun install -g opencode-ai
fi

# oh-my-opencode-slim (agent orchestration plugin for OpenCode)
# Non-interactive install with recommended settings
if command -v mise >/dev/null 2>&1; then
  mise exec -- bunx oh-my-opencode-slim install --no-tui --antigravity=yes --openai=yes --cerebras=no --tmux=yes || true
elif command -v bun >/dev/null 2>&1; then
  bunx oh-my-opencode-slim install --no-tui --antigravity=yes --openai=yes --cerebras=no --tmux=yes || true
fi
